<br />
<div class="row">
	<div class="col-lg-12">
		<ul
			class="nav nav-pills mb-3 nav-fill red"
			id="Pga-ugpg"
			role="tablist"
		>
			<li class="nav-item">
				<a
					class="nav-link active"
					data-toggle="pill"
					href="#Pga-ug"
					(click)="initilizeUG()"
					>Under Graduate</a
				>
			</li>
			<li class="nav-item">
				<a
					class="nav-link"
					data-toggle="pill"
					href="#Pga-ug"
					(click)="initilizePG()"
					>Post Graduate</a
				>
			</li>
		</ul>
		<div class="tab-content" id="Pga-ugpg">
			<div id="Pga-ug" class="tab-pane active">
				<div class="row">
					<div class="col-xs-3" id="year">
						<select
							class="form-control"
							name="year"
							[(ngModel)]="selectedYear"
							(change)="changeData()"
						>
							<!-- <option value="none">Select year</option> -->
							<option
								*ngFor="let session of courses"
								value="{{ session.value }}"
							>
								{{ session.name }}, {{ session.value }}
							</option>
						</select>
					</div>
				</div>
				<br />

				<!-- *************************************************************** -->
				<div class="row">
					<div class="col-md-8">
						<h6>Alloted guides</h6>
						<br />
						<div class="table-responsive">
							<table class="table table-striped">
								<thead>
									<th>Batch No.</th>
									<th>Guide</th>
									<th>Co-Guide</th>
									<th>Enrollment No.</th>
									<th>Student Name</th>
									<th>Edit</th>
									<!-- <th>CGPA</th> -->
								</thead>
							</table>
						</div>
						<div
							style="overflow: auto; height: 700px"
							class="table-responsive"
						>
							<table class="table table-striped">
								<tr *ngFor="let s of alloted">
									<td rowspan="s.students.length">
										{{ s.batchId }}
									</td>
									<td rowspan="s.students.length">
										{{ s.guide.name }}
									</td>
									<td rowspan="s.students.length">
										{{ s.coguide.name }}
									</td>
									<div *ngFor="let student of s.students">
										<td>{{ student.enrollmentId }}</td>
										<td>{{ student.fullName }}</td>
										<!-- <td>{{ student.cgpa }}</td> -->
									</div>
									<td rowspan="s.students.length">
										<button
											type="button"
											class="btn-sm btn-primary"
											(click)="editDetails(s)"
											data-toggle="modal"
											data-target="#exampleModal2"
											aria-hidden="true"
										>
											<i
												class="fa fa-pencil"
												aria-hidden="true"
											></i>
											Edit batch
										</button>
										<br />
										<br />
										<button
											type="button"
											class="btn-sm btn-secondary"
											(click)="addMoreStudents(s)"
										>
											<i
												class="fa fa-pencil"
												aria-hidden="true"
											></i>
											Add Students
										</button>
									</td>
								</tr>
							</table>
						</div>
						<!-- ****************Presentation********************* -->
						<div class="col-xs-1 center">
							<!-- Modal -->

							<button
								type="button"
								class="btn btn-success"
								aria-hidden="true"
								(click)="exportToExcel()"
							>
								Export as csv
							</button>
						</div>
					</div>

					<div class="col-md-4">
						<div class="row center">
							<div class="col-md-3">
								<h6>Select Students</h6>
							</div>
							<div class="col-md-4">
								<label for="groupsize">Group Size : </label>
								<input
									type="number"
									id="groupsize"
									name="groupsize"
									min="1"
									max="50"
									[(ngModel)]="groupsize"
								/>
								<!-- [(ngModel)]="groupsize" -->
							</div>
						</div>
						<br />
						<div class="table-responsive">
							<table class="table table-bordered">
								<thead>
									<th>Enrollment No.</th>
									<th>Name</th>
									<!-- <th>E-mail</th> -->
									<th>Select</th>
								</thead>
							</table>
						</div>
						<div
							style="overflow: auto; height: 600px"
							class="table-responsive"
						>
							<table class="table table-striped">
								<tr *ngFor="let s of students; let i = index">
									<td>{{ s.enrollmentId }}</td>
									<td>{{ s.fullName }}</td>
									<!-- <td>{{ s.email }}</td> -->
									<td
										style="
											text-align: center;
											vertical-align: sub;
										"
									>
										<input
											class="form-check-input"
											type="checkbox"
											name="select"
											(click)="appendStudents(s)"
										/>
									</td>
								</tr>
							</table>
						</div>
						<br />
						<div class="col-xs-1 center">
							<!-- Modal -->

							<button
								type="button"
								class="btn btn-primary"
								[disabled]="batchStudents.length != groupsize"
								data-toggle="modal"
								data-target="#exampleModal1"
								aria-hidden="true"
							>
								Create Batch
							</button>
						</div>
						<div
							class="modal fade"
							id="exampleModal1"
							tabindex="-1"
							role="dialog"
							aria-labelledby="exampleModalLabel1"
							aria-hidden="true"
						>
							<div class="modal-dialog" role="document">
								<div class="modal-content">
									<div class="modal-header">
										<h5
											class="modal-title"
											id="exampleModalLabel1"
										>
											Allot Guide
										</h5>
										<button
											type="button"
											class="close"
											data-dismiss="modal"
											aria-label="Close"
										>
											<span aria-hidden="true"
												>&times;</span
											>
										</button>
									</div>
									<div class="modal-body">
										<form #f1="ngForm">
											<div class="form-group">
												<label for="guide"
													>Select Guide</label
												>
												<select
													class="form-control"
													id="guide"
													[(ngModel)]="myGuide1"
													name="choose1"
													required
												>
													<option [ngValue]="null" selected>Select Guide</option> 
													<option
														*ngFor="let g of guides"
														[ngValue]="g"
													>
														{{ g.name }},
														{{
															g.currentDesignation
														}}
													</option>
												</select>
												<label for="coguide"
													>Select Co-Guide</label
												>
												<select
													class="form-control"
													id="coguide"
													[(ngModel)]="myGuide2"
													name="choose2"
													required
												>
													<option [ngValue]="null" selected>Select Co-guide</option> 
													<option
														*ngFor="let g of guides"
														[ngValue]="g"
													>
														{{ g.name }},
														{{
															g.currentDesignation
														}}
													</option>
												</select>
											</div>
											<div class="modal-footer">
												<button
													type="button"
													class="btn btn-secondary"
													data-dismiss="modal"
												>
													Close
												</button>
												<button
													type="button"
													class="btn btn-primary"
													data-dismiss="modal"
													[disabled]="f1.invalid"
													(click)="allotguide()"
												>
													Allot
												</button>
											</div>
										</form>
									</div>
									
								</div>
							</div>
						</div>
						<div
							class="modal fade"
							id="exampleModal2"
							tabindex="-1"
							role="dialog"
							aria-labelledby="exampleModalLabel2"
							aria-hidden="true"
						>
							<div class="modal-dialog" role="document">
								<div class="modal-content">
									<div class="modal-header">
										<h5
											class="modal-title"
											id="exampleModalLabel2"
										>
											Edit batch
										</h5>
										<button
											type="button"
											class="close"
											data-dismiss="modal"
											aria-label="Close"
										>
											<span aria-hidden="true"
												>&times;</span
											>
										</button>
									</div>
									<div class="modal-body">
										<form #f2="ngForm" *ngIf="editingBatch">
											<div class="form-group">
												<label for="guide"
													>Select Guide</label
												>
												<select
													class="form-control"
													id="guide"
													[(ngModel)]="myGuide1"
													name="choose1"
													required
												>
													<option
														[ngValue]="myGuide1"
														selected
													>
														{{ myGuide1.name }}
													</option>
													<option
														*ngFor="let g of guides"
														[ngValue]="g"
													>
														{{ g.name }},
														{{
															g.currentDesignation
														}}
													</option>
												</select>
												<label for="coguide"
													>Select Co-Guide</label
												>
												<select
													class="form-control"
													id="coguide"
													[(ngModel)]="myGuide2"
													name="choose2"
													required
												>
													<option
														[ngValue]="myGuide2"
														selected
													>
														{{ myGuide2.name }}
													</option>
													<option
														*ngFor="let g of guides"
														[ngValue]="g"
													>
														{{ g.name }},
														{{
															g.currentDesignation
														}}
													</option>
												</select>
											</div>
											<br />
											<div class="form-group">
												<label>
													<strong
														>Choose students for
														removal</strong
													></label
												>
												<br />
												<div
													class="form-check"
													*ngFor="
														let s of editingBatch.students
													"
												>
													<input
														class="form-check-input"
														type="checkbox"
														[value]="s"
														(change)="
															onCheckboxChange(
																$event,
																s
															)
														"
													/>
													<label
														class="form-check-label"
													>
														{{ s.enrollmentId }}:
														{{ s.fullName }}</label
													>
												</div>
											</div>
										</form>
									</div>
									<div class="modal-footer">
										<button
											type="button"
											class="btn btn-secondary"
											data-dismiss="modal"
										>
											Close
										</button>
										<button
											type="button"
											class="btn btn-primary"
											data-dismiss="modal"
											(click)="saveChanges()"
										>
											Save Changes
										</button>
									</div>
								</div>
							</div>
						</div>
						<br />
						<h6>Guides</h6>
						<div class="table-responsive">
							<table class="table table-bordered">
								<thead>
									<th>Name</th>
									<th>Area of Specialization</th>
								</thead>
							</table>
						</div>
						<div
							style="overflow: auto; height: 300px"
							class="table-responsive"
						>
							<table
								class="table table-bordered"
								style="max-height: 25%"
							>
								<tr *ngFor="let g of guides">
									<td>{{ g.name }}</td>
									<td>{{ g.areaOfSpecialization }}</td>
								</tr>
							</table>
						</div>
						<div class="last"></div>
					</div>
				</div>
			</div>
		</div>

		<!-- <button >*********************************PG**********************************</button> -->
	</div>
</div>
